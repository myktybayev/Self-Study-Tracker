"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/goals/new/page",{

/***/ "(app-pages-browser)/./src/lib/goals.ts":
/*!**************************!*\
  !*** ./src/lib/goals.ts ***!
  \**************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addGitHubPushToGoal: function() { return /* binding */ addGitHubPushToGoal; },\n/* harmony export */   addTaskToGoal: function() { return /* binding */ addTaskToGoal; },\n/* harmony export */   createGoal: function() { return /* binding */ createGoal; },\n/* harmony export */   deleteGoal: function() { return /* binding */ deleteGoal; },\n/* harmony export */   getGoalById: function() { return /* binding */ getGoalById; },\n/* harmony export */   getGoalsByStatus: function() { return /* binding */ getGoalsByStatus; },\n/* harmony export */   getUserGoals: function() { return /* binding */ getUserGoals; },\n/* harmony export */   updateGoal: function() { return /* binding */ updateGoal; },\n/* harmony export */   updateTaskInGoal: function() { return /* binding */ updateTaskInGoal; }\n/* harmony export */ });\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n\n\n// Helper function to check if Firebase is available\nconst isFirebaseAvailable = ()=>{\n    return _firebase__WEBPACK_IMPORTED_MODULE_0__.db !== undefined;\n};\n// Helper function to get user goals subcollection reference\nconst getUserGoalsCollection = (userId)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, \"goals\", userId, \"userGoals\");\n};\n// Helper function to get user document reference\nconst getUserDocument = (userId)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, \"goals\", userId);\n};\n// Create a new goal\nconst createGoal = async (goalData)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    const { userId, ...goalWithoutUserId } = goalData;\n    // First, ensure user document exists\n    const userDocRef = getUserDocument(userId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(userDocRef, {\n        userId,\n        createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now(),\n        updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now()\n    }, {\n        merge: true\n    });\n    const goalWithTimestamps = {\n        ...goalWithoutUserId,\n        createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now(),\n        updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now()\n    };\n    const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.addDoc)(getUserGoalsCollection(userId), goalWithTimestamps);\n    return docRef.id;\n};\n// Get all goals for a specific user\nconst getUserGoals = async (userId)=>{\n    if (!isFirebaseAvailable()) {\n        console.warn(\"Firebase not available, returning empty array\");\n        return [];\n    }\n    try {\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(getUserGoalsCollection(userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)(\"createdAt\", \"desc\"));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return querySnapshot.docs.map((doc)=>{\n            var _doc_data_createdAt, _doc_data_updatedAt, _doc_data_targetDate;\n            return {\n                id: doc.id,\n                userId,\n                ...doc.data(),\n                createdAt: ((_doc_data_createdAt = doc.data().createdAt) === null || _doc_data_createdAt === void 0 ? void 0 : _doc_data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_doc_data_updatedAt = doc.data().updatedAt) === null || _doc_data_updatedAt === void 0 ? void 0 : _doc_data_updatedAt.toDate()) || new Date(),\n                targetDate: ((_doc_data_targetDate = doc.data().targetDate) === null || _doc_data_targetDate === void 0 ? void 0 : _doc_data_targetDate.toDate()) || new Date()\n            };\n        });\n    } catch (error) {\n        console.error(\"Error getting user goals:\", error);\n        return [];\n    }\n};\n// Get a specific goal by ID\nconst getGoalById = async (userId, goalId)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    try {\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, \"goals\", userId, \"userGoals\", goalId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(docRef);\n        if (docSnap.exists()) {\n            var _data_createdAt, _data_updatedAt, _data_targetDate;\n            const data = docSnap.data();\n            return {\n                id: docSnap.id,\n                userId,\n                ...data,\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                targetDate: ((_data_targetDate = data.targetDate) === null || _data_targetDate === void 0 ? void 0 : _data_targetDate.toDate()) || new Date()\n            };\n        } else {\n            return null;\n        }\n    } catch (error) {\n        console.error(\"Error getting goal:\", error);\n        return null;\n    }\n};\n// Update a goal\nconst updateGoal = async (userId, goalId, updates)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    const { userId: _, ...updatesWithoutUserId } = updates; // Remove userId from updates\n    const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, \"goals\", userId, \"userGoals\", goalId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(docRef, {\n        ...updatesWithoutUserId,\n        updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.Timestamp.now()\n    });\n};\n// Delete a goal\nconst deleteGoal = async (userId, goalId)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase__WEBPACK_IMPORTED_MODULE_0__.db, \"goals\", userId, \"userGoals\", goalId);\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.deleteDoc)(docRef);\n};\n// Add a task to a goal\nconst addTaskToGoal = async (userId, goalId, task)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    const goal = await getGoalById(userId, goalId);\n    if (!goal) {\n        throw new Error(\"Goal not found\");\n    }\n    const newTask = {\n        ...task,\n        id: \"task_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9))\n    };\n    const updatedTasks = [\n        ...goal.tasks,\n        newTask\n    ];\n    await updateGoal(userId, goalId, {\n        tasks: updatedTasks\n    });\n};\n// Update a task in a goal\nconst updateTaskInGoal = async (userId, goalId, taskId, updates)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    const goal = await getGoalById(userId, goalId);\n    if (!goal) {\n        throw new Error(\"Goal not found\");\n    }\n    const updatedTasks = goal.tasks.map((task)=>task.id === taskId ? {\n            ...task,\n            ...updates\n        } : task);\n    await updateGoal(userId, goalId, {\n        tasks: updatedTasks\n    });\n};\n// Add a GitHub push to a goal\nconst addGitHubPushToGoal = async (userId, goalId, push)=>{\n    if (!isFirebaseAvailable()) {\n        throw new Error(\"Firebase is not available\");\n    }\n    const goal = await getGoalById(userId, goalId);\n    if (!goal) {\n        throw new Error(\"Goal not found\");\n    }\n    const newPush = {\n        ...push,\n        id: \"push_\".concat(Date.now(), \"_\").concat(Math.random().toString(36).substr(2, 9))\n    };\n    const updatedPushes = [\n        ...goal.githubPushes,\n        newPush\n    ];\n    await updateGoal(userId, goalId, {\n        githubPushes: updatedPushes\n    });\n};\n// Get goals by status for a specific user\nconst getGoalsByStatus = async (userId, status)=>{\n    if (!isFirebaseAvailable()) {\n        console.warn(\"Firebase not available, returning empty array\");\n        return [];\n    }\n    try {\n        let q;\n        if (status === \"all\") {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(getUserGoalsCollection(userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)(\"createdAt\", \"desc\"));\n        } else {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(getUserGoalsCollection(userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"status\", \"==\", status), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.orderBy)(\"createdAt\", \"desc\"));\n        }\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n        return querySnapshot.docs.map((doc)=>{\n            var _doc_data_createdAt, _doc_data_updatedAt, _doc_data_targetDate;\n            return {\n                id: doc.id,\n                userId,\n                ...doc.data(),\n                createdAt: ((_doc_data_createdAt = doc.data().createdAt) === null || _doc_data_createdAt === void 0 ? void 0 : _doc_data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_doc_data_updatedAt = doc.data().updatedAt) === null || _doc_data_updatedAt === void 0 ? void 0 : _doc_data_updatedAt.toDate()) || new Date(),\n                targetDate: ((_doc_data_targetDate = doc.data().targetDate) === null || _doc_data_targetDate === void 0 ? void 0 : _doc_data_targetDate.toDate()) || new Date()\n            };\n        });\n    } catch (error) {\n        console.error(\"Error getting goals by status:\", error);\n        return [];\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RXBDLE9BQU9DLGNBQWNDLElBQUksQ0FBQ0MsR0FBRyxDQUFDN0IsQ0FBQUE7Z0JBSWZBLHFCQUNBQSxxQkFDQ0E7bUJBTnNCO2dCQUNsQ3NCLElBQUl0QixJQUFJc0IsRUFBRTtnQkFDVmI7Z0JBQ0EsR0FBR1QsSUFBSThCLElBQUksRUFBRTtnQkFDYmQsV0FBV2hCLEVBQUFBLHNCQUFBQSxJQUFJOEIsSUFBSSxHQUFHZCxTQUFTLGNBQXBCaEIsMENBQUFBLG9CQUFzQitCLE1BQU0sT0FBTSxJQUFJQztnQkFDakRkLFdBQVdsQixFQUFBQSxzQkFBQUEsSUFBSThCLElBQUksR0FBR1osU0FBUyxjQUFwQmxCLDBDQUFBQSxvQkFBc0IrQixNQUFNLE9BQU0sSUFBSUM7Z0JBQ2pEQyxZQUFZakMsRUFBQUEsdUJBQUFBLElBQUk4QixJQUFJLEdBQUdHLFVBQVUsY0FBckJqQywyQ0FBQUEscUJBQXVCK0IsTUFBTSxPQUFNLElBQUlDO1lBQ3ZEOztJQUNKLEVBQUUsT0FBT0UsT0FBTztRQUNaVixRQUFRVSxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPLEVBQUU7SUFDYjtBQUNKLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9nb2Fscy50cz9mMjQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRiIH0gZnJvbSAnLi9maXJlYmFzZSc7XG5pbXBvcnQgeyBjb2xsZWN0aW9uLCBhZGREb2MsIGdldERvY3MsIGdldERvYywgdXBkYXRlRG9jLCBkZWxldGVEb2MsIGRvYywgcXVlcnksIHdoZXJlLCBvcmRlckJ5LCBUaW1lc3RhbXAsIHNldERvYyB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyBHb2FsLCBUYXNrLCBHaXRIdWJQdXNoIH0gZnJvbSAnQC90eXBlcy9nb2FsJztcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIEZpcmViYXNlIGlzIGF2YWlsYWJsZVxuY29uc3QgaXNGaXJlYmFzZUF2YWlsYWJsZSA9ICgpID0+IHtcbiAgICByZXR1cm4gZGIgIT09IHVuZGVmaW5lZDtcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdXNlciBnb2FscyBzdWJjb2xsZWN0aW9uIHJlZmVyZW5jZVxuY29uc3QgZ2V0VXNlckdvYWxzQ29sbGVjdGlvbiA9ICh1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghaXNGaXJlYmFzZUF2YWlsYWJsZSgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyZWJhc2UgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIH1cbiAgICByZXR1cm4gY29sbGVjdGlvbihkYiEsICdnb2FscycsIHVzZXJJZCwgJ3VzZXJHb2FscycpO1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyIGRvY3VtZW50IHJlZmVyZW5jZVxuY29uc3QgZ2V0VXNlckRvY3VtZW50ID0gKHVzZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlYmFzZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBkb2MoZGIhLCAnZ29hbHMnLCB1c2VySWQpO1xufTtcblxuLy8gQ3JlYXRlIGEgbmV3IGdvYWxcbmV4cG9ydCBjb25zdCBjcmVhdGVHb2FsID0gYXN5bmMgKGdvYWxEYXRhOiBPbWl0PEdvYWwsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPik6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlYmFzZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgeyB1c2VySWQsIC4uLmdvYWxXaXRob3V0VXNlcklkIH0gPSBnb2FsRGF0YTtcbiAgICBcbiAgICAvLyBGaXJzdCwgZW5zdXJlIHVzZXIgZG9jdW1lbnQgZXhpc3RzXG4gICAgY29uc3QgdXNlckRvY1JlZiA9IGdldFVzZXJEb2N1bWVudCh1c2VySWQpO1xuICAgIGF3YWl0IHNldERvYyh1c2VyRG9jUmVmLCB7IFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGNyZWF0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKVxuICAgIH0sIHsgbWVyZ2U6IHRydWUgfSk7XG5cbiAgICBjb25zdCBnb2FsV2l0aFRpbWVzdGFtcHMgPSB7XG4gICAgICAgIC4uLmdvYWxXaXRob3V0VXNlcklkLFxuICAgICAgICBjcmVhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgfTtcblxuICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhnZXRVc2VyR29hbHNDb2xsZWN0aW9uKHVzZXJJZCksIGdvYWxXaXRoVGltZXN0YW1wcyk7XG4gICAgcmV0dXJuIGRvY1JlZi5pZDtcbn07XG5cbi8vIEdldCBhbGwgZ29hbHMgZm9yIGEgc3BlY2lmaWMgdXNlclxuZXhwb3J0IGNvbnN0IGdldFVzZXJHb2FscyA9IGFzeW5jICh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8R29hbFtdPiA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGaXJlYmFzZSBub3QgYXZhaWxhYmxlLCByZXR1cm5pbmcgZW1wdHkgYXJyYXknKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgICAgIGdldFVzZXJHb2Fsc0NvbGxlY3Rpb24odXNlcklkKSxcbiAgICAgICAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJylcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcbiAgICAgICAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAgICAgICB1c2VySWQsIC8vIEFkZCB1c2VySWQgYmFjayB0byB0aGUgZ29hbCBvYmplY3RcbiAgICAgICAgICAgIC4uLmRvYy5kYXRhKCksXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGRvYy5kYXRhKCkuY3JlYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBkb2MuZGF0YSgpLnVwZGF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgICAgIHRhcmdldERhdGU6IGRvYy5kYXRhKCkudGFyZ2V0RGF0ZT8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgfSkpIGFzIEdvYWxbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgZ29hbHM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcblxuLy8gR2V0IGEgc3BlY2lmaWMgZ29hbCBieSBJRFxuZXhwb3J0IGNvbnN0IGdldEdvYWxCeUlkID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nLCBnb2FsSWQ6IHN0cmluZyk6IFByb21pc2U8R29hbCB8IG51bGw+ID0+IHtcbiAgICBpZiAoIWlzRmlyZWJhc2VBdmFpbGFibGUoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcmViYXNlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIhLCAnZ29hbHMnLCB1c2VySWQsICd1c2VyR29hbHMnLCBnb2FsSWQpO1xuICAgICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICAgIFxuICAgICAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGRvY1NuYXAuZGF0YSgpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogZG9jU25hcC5pZCxcbiAgICAgICAgICAgICAgICB1c2VySWQsIC8vIEFkZCB1c2VySWQgYmFjayB0byB0aGUgZ29hbCBvYmplY3RcbiAgICAgICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBkYXRhLnVwZGF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlOiBkYXRhLnRhcmdldERhdGU/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB9IGFzIEdvYWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZ29hbDonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5cbi8vIFVwZGF0ZSBhIGdvYWxcbmV4cG9ydCBjb25zdCB1cGRhdGVHb2FsID0gYXN5bmMgKHVzZXJJZDogc3RyaW5nLCBnb2FsSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxHb2FsPik6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGlmICghaXNGaXJlYmFzZUF2YWlsYWJsZSgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyZWJhc2UgaXMgbm90IGF2YWlsYWJsZScpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklkOiBfLCAuLi51cGRhdGVzV2l0aG91dFVzZXJJZCB9ID0gdXBkYXRlczsgLy8gUmVtb3ZlIHVzZXJJZCBmcm9tIHVwZGF0ZXNcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIhLCAnZ29hbHMnLCB1c2VySWQsICd1c2VyR29hbHMnLCBnb2FsSWQpO1xuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgLi4udXBkYXRlc1dpdGhvdXRVc2VySWQsXG4gICAgICAgIHVwZGF0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgIH0pO1xufTtcblxuLy8gRGVsZXRlIGEgZ29hbFxuZXhwb3J0IGNvbnN0IGRlbGV0ZUdvYWwgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIGdvYWxJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlYmFzZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiISwgJ2dvYWxzJywgdXNlcklkLCAndXNlckdvYWxzJywgZ29hbElkKTtcbiAgICBhd2FpdCBkZWxldGVEb2MoZG9jUmVmKTtcbn07XG5cbi8vIEFkZCBhIHRhc2sgdG8gYSBnb2FsXG5leHBvcnQgY29uc3QgYWRkVGFza1RvR29hbCA9IGFzeW5jICh1c2VySWQ6IHN0cmluZywgZ29hbElkOiBzdHJpbmcsIHRhc2s6IE9taXQ8VGFzaywgJ2lkJz4pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICBpZiAoIWlzRmlyZWJhc2VBdmFpbGFibGUoKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcmViYXNlIGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnb2FsID0gYXdhaXQgZ2V0R29hbEJ5SWQodXNlcklkLCBnb2FsSWQpO1xuICAgIGlmICghZ29hbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dvYWwgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgY29uc3QgbmV3VGFzazogVGFzayA9IHtcbiAgICAgICAgLi4udGFzayxcbiAgICAgICAgaWQ6IGB0YXNrXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICB9O1xuXG4gICAgY29uc3QgdXBkYXRlZFRhc2tzID0gWy4uLmdvYWwudGFza3MsIG5ld1Rhc2tdO1xuICAgIGF3YWl0IHVwZGF0ZUdvYWwodXNlcklkLCBnb2FsSWQsIHsgdGFza3M6IHVwZGF0ZWRUYXNrcyB9KTtcbn07XG5cbi8vIFVwZGF0ZSBhIHRhc2sgaW4gYSBnb2FsXG5leHBvcnQgY29uc3QgdXBkYXRlVGFza0luR29hbCA9IGFzeW5jICh1c2VySWQ6IHN0cmluZywgZ29hbElkOiBzdHJpbmcsIHRhc2tJZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFRhc2s+KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlYmFzZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ29hbCA9IGF3YWl0IGdldEdvYWxCeUlkKHVzZXJJZCwgZ29hbElkKTtcbiAgICBpZiAoIWdvYWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb2FsIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IHVwZGF0ZWRUYXNrcyA9IGdvYWwudGFza3MubWFwKHRhc2sgPT5cbiAgICAgICAgdGFzay5pZCA9PT0gdGFza0lkID8geyAuLi50YXNrLCAuLi51cGRhdGVzIH0gOiB0YXNrXG4gICAgKTtcblxuICAgIGF3YWl0IHVwZGF0ZUdvYWwodXNlcklkLCBnb2FsSWQsIHsgdGFza3M6IHVwZGF0ZWRUYXNrcyB9KTtcbn07XG5cbi8vIEFkZCBhIEdpdEh1YiBwdXNoIHRvIGEgZ29hbFxuZXhwb3J0IGNvbnN0IGFkZEdpdEh1YlB1c2hUb0dvYWwgPSBhc3luYyAodXNlcklkOiBzdHJpbmcsIGdvYWxJZDogc3RyaW5nLCBwdXNoOiBPbWl0PEdpdEh1YlB1c2gsICdpZCc+KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJlYmFzZSBpcyBub3QgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZ29hbCA9IGF3YWl0IGdldEdvYWxCeUlkKHVzZXJJZCwgZ29hbElkKTtcbiAgICBpZiAoIWdvYWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb2FsIG5vdCBmb3VuZCcpO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld1B1c2g6IEdpdEh1YlB1c2ggPSB7XG4gICAgICAgIC4uLnB1c2gsXG4gICAgICAgIGlkOiBgcHVzaF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgfTtcblxuICAgIGNvbnN0IHVwZGF0ZWRQdXNoZXMgPSBbLi4uZ29hbC5naXRodWJQdXNoZXMsIG5ld1B1c2hdO1xuICAgIGF3YWl0IHVwZGF0ZUdvYWwodXNlcklkLCBnb2FsSWQsIHsgZ2l0aHViUHVzaGVzOiB1cGRhdGVkUHVzaGVzIH0pO1xufTtcblxuLy8gR2V0IGdvYWxzIGJ5IHN0YXR1cyBmb3IgYSBzcGVjaWZpYyB1c2VyXG5leHBvcnQgY29uc3QgZ2V0R29hbHNCeVN0YXR1cyA9IGFzeW5jICh1c2VySWQ6IHN0cmluZywgc3RhdHVzOiAnYWxsJyB8ICdhY3RpdmUnIHwgJ2NvbXBsZXRlZCcgfCAncGF1c2VkJyk6IFByb21pc2U8R29hbFtdPiA9PiB7XG4gICAgaWYgKCFpc0ZpcmViYXNlQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGaXJlYmFzZSBub3QgYXZhaWxhYmxlLCByZXR1cm5pbmcgZW1wdHkgYXJyYXknKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGxldCBxO1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnYWxsJykge1xuICAgICAgICAgICAgcSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgIGdldFVzZXJHb2Fsc0NvbGxlY3Rpb24odXNlcklkKSxcbiAgICAgICAgICAgICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcSA9IHF1ZXJ5KFxuICAgICAgICAgICAgICAgIGdldFVzZXJHb2Fsc0NvbGxlY3Rpb24odXNlcklkKSxcbiAgICAgICAgICAgICAgICB3aGVyZSgnc3RhdHVzJywgJz09Jywgc3RhdHVzKSxcbiAgICAgICAgICAgICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiAoe1xuICAgICAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgICAgIHVzZXJJZCwgLy8gQWRkIHVzZXJJZCBiYWNrIHRvIHRoZSBnb2FsIG9iamVjdFxuICAgICAgICAgICAgLi4uZG9jLmRhdGEoKSxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZG9jLmRhdGEoKS5jcmVhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IGRvYy5kYXRhKCkudXBkYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdGFyZ2V0RGF0ZTogZG9jLmRhdGEoKS50YXJnZXREYXRlPy50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICB9KSkgYXMgR29hbFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZ29hbHMgYnkgc3RhdHVzOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOlsiZGIiLCJjb2xsZWN0aW9uIiwiYWRkRG9jIiwiZ2V0RG9jcyIsImdldERvYyIsInVwZGF0ZURvYyIsImRlbGV0ZURvYyIsImRvYyIsInF1ZXJ5Iiwid2hlcmUiLCJvcmRlckJ5IiwiVGltZXN0YW1wIiwic2V0RG9jIiwiaXNGaXJlYmFzZUF2YWlsYWJsZSIsInVuZGVmaW5lZCIsImdldFVzZXJHb2Fsc0NvbGxlY3Rpb24iLCJ1c2VySWQiLCJFcnJvciIsImdldFVzZXJEb2N1bWVudCIsImNyZWF0ZUdvYWwiLCJnb2FsRGF0YSIsImdvYWxXaXRob3V0VXNlcklkIiwidXNlckRvY1JlZiIsImNyZWF0ZWRBdCIsIm5vdyIsInVwZGF0ZWRBdCIsIm1lcmdlIiwiZ29hbFdpdGhUaW1lc3RhbXBzIiwiZG9jUmVmIiwiaWQiLCJnZXRVc2VyR29hbHMiLCJjb25zb2xlIiwid2FybiIsInEiLCJxdWVyeVNuYXBzaG90IiwiZG9jcyIsIm1hcCIsImRhdGEiLCJ0b0RhdGUiLCJEYXRlIiwidGFyZ2V0RGF0ZSIsImVycm9yIiwiZ2V0R29hbEJ5SWQiLCJnb2FsSWQiLCJkb2NTbmFwIiwiZXhpc3RzIiwidXBkYXRlR29hbCIsInVwZGF0ZXMiLCJfIiwidXBkYXRlc1dpdGhvdXRVc2VySWQiLCJkZWxldGVHb2FsIiwiYWRkVGFza1RvR29hbCIsInRhc2siLCJnb2FsIiwibmV3VGFzayIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInVwZGF0ZWRUYXNrcyIsInRhc2tzIiwidXBkYXRlVGFza0luR29hbCIsInRhc2tJZCIsImFkZEdpdEh1YlB1c2hUb0dvYWwiLCJwdXNoIiwibmV3UHVzaCIsInVwZGF0ZWRQdXNoZXMiLCJnaXRodWJQdXNoZXMiLCJnZXRHb2Fsc0J5U3RhdHVzIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/goals.ts\n"));

/***/ })

});